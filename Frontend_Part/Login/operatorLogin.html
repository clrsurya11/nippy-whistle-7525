<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="operatorLogin.css">
    <title>ConsumerLogin</title>
</head>
<body>
    <!-- navbar -->
    <div id="nav-menu" >
        <div class="project_logo">
            <img src="../Images/Customer Support2.png" alt="">
            <h1>SUPPORT CENTER</h1>
        </div>
           
        <i class='bx bx-menu' id="menu-icon"></i>

        <nav class="navbar">
            <!-- <a href="#home"> <img id="logo"  src="./Images/logo.avif" alt=""></a> -->
            <a href="./adminLogin.html"  >Admin Login</a >
            <a href="./operatorLogin.html" >Operator Login</a >
            <a href="./consumerLogin.html"  >Consumer Login</a >
        </nav>    
               
         <!-- <li><button id="resume-button-1" onclick="resume()"><a id="resume-link-1" class="nav-link resume" href="./Image/Suryakant-Singh-Resume.pdf" download="Suryakant_Singh_Resume" target="_blank">Resume</a></button></li>

         <a href="javascript:void(0);" class="icon" onclick="myfunction()"> â˜° </a> -->
    </div>

    <!-- Menu -->
    <div id="menu" class="menu">
        <div>
            <h2>Operator's Login Credentials</h2>
        </div>
        <div>
            <form action="#">
                <label for="mobile">Mobile No<span>*</span> :</label>
                <input id="mobile" type="text" placeholder="Enter Mobile Number" required>
                <label for="password">Password<span>*</span> :</label>
                <input id="password" type="password" placeholder="Enter Password" required>
                <label for="userType">User Type<span>*</span> :</label>
                <select name="userType" id="userType" required>
                    <option value="operator" selected>Operator</option>
                </select>
            </form>
            <a href="#"><button id="login">Login</button></a>
        </div>
    </div>

</body>
<script>
   
    // document.getElementById("find").addEventListener("click",function(event){ 
    //     let custId=+document.getElementById("custId").value;
    //     console.log(custId);
    // })
    
    
    let add=document.getElementById("login");
    add.addEventListener("click",function(event){
        event.preventDefault();
        let mobileNo=document.getElementById("mobile").value;
        let password=document.getElementById("password").value;

        let dataObj={
            mobileNo,
            password
        };
    if(mobile!=="" && password!=""){
        fetch(`http://localhost:8080/customer/login`,{
            method:'POST',
            headers:{
                'Content-Type': 'application/json'
            },
            body:JSON.stringify(dataObj)
        })
        .then(response => response.text())
        .then(data=>{
         console.log(data);
         if(data.message!==undefined){
            alert("Customer Logged In successfully")
            openPage("../RoleOfUsers/adminRole.html");
         }
         else{
            alert("Invalid Mobile No. or Password")
         }
        })
        .catch(error=>{
            console.log(error);
        })
    }
    else{
       alert("Input boxes are mandatory")
    }
    });

    function openPage(url) {
      window.open(url, "_blank");
    }

    // function renderCards(data){
    //     let res_div=document.getElementById("resultant_data");
    //     res_div.innerHTML="";
    //     res_div.innerHTML+=`
    //     <h1>Output :-</h1>
    //     `
    //     res_div.innerHTML+=`
    //           <div class="card">
    //             <h3>CustomerId : ${data.deptId}</h3>
    //             <h3>CustomerName : ${data.deptName}</h3>
    //           </div>  
    //         `
    // };

    // function errorMessage(data){
    //     console.log(data);
    //     let res_div=document.getElementById("resultant_data");
    //     res_div.innerHTML="";
    //     res_div.innerHTML+=`
    //     <h1>Output :-</h1>
    //     `

    //     res_div.innerHTML+=`
    //           <div class="card">
    //             <h3>timestamp : ${data.timestamp}</h3>
    //             <h3>details : ${data.details}</h3>
    //             <h3>message : ${data.message}</h3>
    //           </div>  
    //         `
    // };

    
</script>
</html>